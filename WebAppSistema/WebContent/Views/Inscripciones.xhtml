<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<link
		href="https://fonts.googleapis.com/css?family=Barlow:300display=swap"
		rel="stylesheet" />
</h:head>
<body>
	<ui:composition template="/Template/Template.xhtml">

		<ui:define name="top">

		</ui:define>

		<ui:define name="content">
			<br></br>
			<h3 style="font-family: 'Barlow', sans-serif;">ADMINISTRACIÓN DE
				INSCRIPCIONES-CICLO ESCOLAR 2019-2020</h3>
			<br></br>
			<!--Barra de tareas-->
			<h:form>


				<p:toolbar>
					<f:facet name="left">
						<br></br>
						<p:commandButton value="" oncomplete="PF('dlgAgregar').show()"
							style="height: 50px; width: 50px; background-image: url('/img/book.png') !important; 
							background-size: 50px; background-repeat: no-repeat"
							title="Agregar nuevo registro" />
						<br></br>
						<br></br>
					</f:facet>

					<f:facet name="right">

					</f:facet>

				</p:toolbar>
			</h:form>
			<!--Barra de tareas-->

			<br></br>
			<h3 style="font-family: 'Barlow', sans-serif;">REGISTROS</h3>
			<br></br>
			<!--Formulario principal-->
			<h:form id="frmPrincipal">
				<p:growl id="messages" showDetail="true" showSummary="true" />
				<p:panel id="pnlPrincipal" header=""
					style="margin: 0 auto; text-align: center; font-size: 12px; font-family: 'Barlow', sans-serif">
					<p:layoutUnit id="tablaPrincipal" position="center"
						style="padding: 5px; text-align: center;">
						<p:dataTable var="var" value="#{inscripcion.listaRegistro}"
							sortMode="multiple" scrollable="true" scrollHeight="435"
							scrollWidth="100%"
							paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
							rowsPerPageTemplate="10,20,50,100,200,500" rows="10"
							reflow="true" paginator="true" rowHover="true"
							currentPageReportTemplate="Inscripciones #{inscripcion.listaRegistro.size()}"
							paginatorAlwaysVisible="true" emptyMessage="No hay registros">

							<p:column headerText="Nombre">
								<h:outputText
									value="#{var.catequizado.nombre} #{var.catequizado.apellidoPaterno} #{var.catequizado.apellidoMaterno}" />
							</p:column>

							<p:column headerText="Libro">
								<h:outputText value="#{var.libro.nombre}" />
							</p:column>

							<p:column headerText="Horario">
								<h:outputText
									value="#{var.horario.dia} de #{var.horario.horaInicio} hrs. a #{var.horario.horaFin} hrs." />
							</p:column>

							<p:column headerText="Catequista">
								<h:outputText
									value="#{var.catequista.nombre} #{var.catequista.apellidoPaterno} #{var.catequista.apellidoMaterno}" />
							</p:column>

							<p:column headerText="Parroquia">
								<h:outputText value="#{var.parroquia.parroquia}" />
							</p:column>

							<p:column headerText="Folio recibo">
								<h:outputText value="#{var.idRegistro}" />
							</p:column>

							<p:column headerText="Costo inscripción">
								<h:outputText value="#{var.costo}" />
							</p:column>

							<p:column headerText="Ciclo">
								<h:outputText value="#{var.ciclo.nombre}" />
							</p:column>

							<p:column headerText="..." style="width: 4%">
								<h:commandLink value="" target="_blank"
									actionListener="#{inscripcion.imprimirCredencial(var.idRegistro)}">
									<h:graphicImage value="/img/credencial.png"
										style="height: 20px; width: 28px;" />
								</h:commandLink>
							</p:column>

							<p:column headerText="Recibo" style="width: 4%">
								<h:commandLink value="" target="_blank"
									actionListener="#{inscripcion.imprimirCredencial(var.idRegistro)}">
									<h:graphicImage value="/img/document.png"
										style="height: 28px; width: 28px;" />
								</h:commandLink>
							</p:column>

							<p:column headerText="Editar" style="width: 4%">
								<p:commandButton value=""
									style="height: 28px; width: 28px; background-image: url('/img/edit.png') !important;
									background-size: 26px; background-repeat: no-repeat"
									title="Editar registro" />
							</p:column>

							<p:column headerText="Borrar" style="width: 4%">
								<p:commandButton value=""
									style="height: 28px; width: 28px; background-image: url('/img/delete.png') !important;
									background-size: 26px; background-repeat: no-repeat"
									title="Editar registro" />
							</p:column>

						</p:dataTable>
					</p:layoutUnit>
				</p:panel>
			</h:form>
			<!--Formulario principal-->


			<!--Diálogo para agregar-->
			<h:form id="frmAgregar">

				<p:dialog id="dialogo" widgetVar="dlgAgregar"
					header="Agregar nuevo registro de inscripción" showEffect="clip"
					hideEffect="explode" resizable="false" responsive="true"
					style="font-size:13px">
					<p:panel id="pnlAgregar">
						<p:messages id="msg" showDetail="true" closable="true" />
						<p:panelGrid id="panelAgregar" columns="2" style="margin: 0 auto;">

							<p:outputLabel value="Ingresa nombre del catequizado"
								for="byNombreCateq" />
							<p:autoComplete id="byNombreCateq" size="55"
								onfocus="javascript:this.select()"
								placeholder="Ingresa p. ej AA o ZZ" dropdown="true"
								value="#{inscripcion.nombreCatequizado}"
								completeMethod="#{inscripcion.completeCatequizado}"
								required="true" requiredMessage="Campo requerido">
								<p:message for="byNombreCateq" />
							</p:autoComplete>

							<p:outputLabel value="Ingresa nombre del catequista"
								for="byNombreCatequista" />
							<p:autoComplete id="byNombreCatequista" size="55"
								onfocus="javascript:this.select()"
								placeholder="Ingresa p. ej AA o ZZ" dropdown="true"
								value="#{inscripcion.nombreCatequista}"
								completeMethod="#{inscripcion.completeCatequista}"
								required="true" requiredMessage="Campo requerido">
								<p:message for="byNombreCatequista" />
							</p:autoComplete>


							<p:outputLabel value="Ingresa nombre del Libro"
								for="byNombreLibro" />
							<p:autoComplete id="byNombreLibro" size="55"
								onfocus="javascript:this.select()"
								placeholder="Ingresa p. ej AA o ZZ" dropdown="true"
								value="#{inscripcion.nombreLibro}"
								completeMethod="#{inscripcion.completeLibro}" required="true"
								requiredMessage="Campo requerido">
								<p:message for="byNombreLibro" />
							</p:autoComplete>


							<p:outputLabel value="Ingresa nombre del Horario"
								for="byNombreHorario" />
							<p:autoComplete id="byNombreHorario" size="55"
								onfocus="javascript:this.select()"
								placeholder="Ingresa p. ej AA o ZZ" dropdown="true"
								value="#{inscripcion.nombreHorario}"
								completeMethod="#{inscripcion.completeHorario}" required="true"
								requiredMessage="Campo requerido">
								<p:message for="byNombreHorario" />
							</p:autoComplete>

							<p:outputLabel value="Ingresa nombre de la Parroquia"
								for="byNombreParroquia" />
							<p:autoComplete id="byNombreParroquia" size="55"
								onfocus="javascript:this.select()"
								placeholder="Ingresa p. ej AA o ZZ" dropdown="true"
								value="#{inscripcion.nombreParroquia}"
								completeMethod="#{inscripcion.completeParroquia}"
								required="true" requiredMessage="Campo requerido">
								<p:message for="byNombreParroquia" />
							</p:autoComplete>

							<p:outputLabel for="costo" value="Costo de inscripción" />
							<p:inputText id="costo" value="#{inscripcion.registro.costo}"
								required="true" requiredMessage="Requiere costo"
								placeholder="Costo de inscripción">
								<p:message for="costo" />
							</p:inputText>

							<p:outputLabel value="Ingresa nombre del Ciclo"
								for="byNombreCiclo" />
							<p:autoComplete id="byNombreCiclo" size="55"
								onfocus="javascript:this.select()"
								placeholder="Ingresa p. ej AA o ZZ" dropdown="true"
								value="#{inscripcion.nombreCiclo}"
								completeMethod="#{inscripcion.completeCiclo}" required="true"
								requiredMessage="Campo requerido">
								<p:message for="byNombreCiclo" />
							</p:autoComplete>

						</p:panelGrid>
					</p:panel>
					<p:spacer width="700" height="15" />
					<p:commandButton id="track"
						style="height: 50px; width: 50px; background-image: url('/img/save.png') !important;
						background-size: 50px; background-repeat: no-repeat"
						value="" update="pnlAgregar, msg" title="Guardar registro"
						actionListener="#{inscripcion.guardarRegistro()}">
					</p:commandButton>
				</p:dialog>
			</h:form>
			<!--Diálogo para agregar-->

		</ui:define>


	</ui:composition>
</body>
</html>